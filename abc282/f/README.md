# ABC282 F

[1] まず、フェイズ2では和集合を取るので、aとbの集合は共通部分があっても良いことに気付いておく。

[2] クエリの長さ(R-L+1)に注目して考える。
- まず、長さが1のクエリに対応しないといけないので、フェイズ1では長さ1の組を全て用意しておかないといけない。((1, 1), (2, 2), ... など)
- 長さが2のクエリは、長さが1の組を2つ並べれば作れる。
- 長さが3のクエリを作るには、長さが2の組を全て用意しておくか、長さが3の組を全て用意しておく、のどちらかをやっておけば良い。
  前者は長さ4のクエリまでしか対応できないのに対して、後者は長さが6のクエリまで対応できる([1]より)。
  よって、後者を選ぶ方が最適である。
- 同じように選ぶと、長さが1, 3, 7, 15, ..., 2047 (2^i-1, i=1, 2, ..., 11) の組を用意しておけば良い。これは5万個以下に収まる。
